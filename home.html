<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./asset/main.css" />
    <title>Trang Quản Lý</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/treeflex/dist/css/treeflex.css"
    />
  </head>

  <body>
    <div class="container">
      <div class="navigation">
        <ul>
          <li>
            <a href="#">
              <!-- <img src="./asset/img/logo.png" alt="" class="logo_main"> -->
            </a>
          </li>
          <li>
            <a href="index.html">
              <span class="icon"
                ><i class="fa-solid fa-house sidebar_left--icon"></i
              ></span>
              <span class="title">Trang chủ</span>
            </a>
          </li>
          <li>
            <a href="phahe.html">
              <span class="icon"><i class="fa-solid fa-users"></i></span>
              <span class="title">Quản lí phả hệ</span>
            </a>
          </li>
          <li>
            <a href="#">
              <span class="icon"
                ><i class="fa-solid fa-book-bookmark"></i
              ></span>
              <span class="title">Quản lí phả ký</span>
            </a>
          </li>
          <li>
            <a href="phado.html">
              <span class="icon"
                ><i class="fa-solid fa-network-wired sidebar_left--icon"></i
              ></span>
              <span class="title">Quản lí phả đồ</span>
            </a>
          </li>
          <li>
            <a href="ngoaipha.html">
              <span class="icon"
                ><i class="fa-solid fa-book-open-reader"></i
              ></span>
              <span class="title">Ngoại phả</span>
            </a>
          </li>
          <li>
            <a href="phukhao.html">
              <span class="icon"
                ><i class="fa-solid fa-house-chimney"></i
              ></span>
              <span class="title">Phụ khảo</span>
            </a>
          </li>
          <li>
            <a href="hinhanh.html">
              <span class="icon"><i class="fa-solid fa-images"></i></span>
              <span class="title">Hình ảnh</span>
            </a>
          </li>
          <li>
            <a href="congduc.html">
              <span class="icon"><i class="fa-solid fa-toolbox"></i></span>
              <span class="title">Công đức</span>
            </a>
          </li>
          <li>
            <a
              onclick="handleLogout()"
              class="logout-btn"
              style="cursor: pointer"
            >
              <span class="icon"
                ><i class="fa-solid fa-right-to-bracket"></i
              ></span>
              <span class="title">Đăng xuất tài khoản</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main">
      <div class="topbar">
        <div class="toggle">
          <i class="fa-solid fa-bars"></i>
        </div>
        <div class="search">
          <label for="">
            <input type="text" placeholder="Tìm kiếm" />
            <i class="fa-solid fa-magnifying-glass"></i>
          </label>
        </div>
        <div class="user"></div>
      </div>
      <div class="main_content">
        <div class="content_pk">
          <div class="title-box">HOME</div>
        </div>
      </div>
    </div>
    <script src="./asset/js/auth.js"></script>
    <script src="./asset/js/main.js"></script>
    <script type="module" src="./asset/js/login.js"></script>
    <script>
      function handleLogout() {
        // Xóa tất cả dữ liệu liên quan đến người dùng khỏi localStorage
        localStorage.removeItem("userToken");
        localStorage.removeItem("userId");
        localStorage.removeItem("userRole");
        localStorage.removeItem("userData");
        window.location.href = "index.html";
      }
    </script>
    <script type="module">
      import { renderUserAvatar } from "./asset/js/userInfo.js";

      document.addEventListener("DOMContentLoaded", () => {
        // Kiểm tra trạng thái đăng nhập khi trang tải
        if (!checkAuth() && window.location.pathname !== "/index.html") {
          window.location.href = "index.html";
          return;
        }

        // Hiển thị avatar người dùng nếu đã đăng nhập
        renderUserAvatar();
      });

      function goToProfile() {
        // Chuyển đến trang profile nếu đã đăng nhập
        if (checkAuth()) {
          window.location.href = "profile.html";
        } else {
          window.location.href = "index.html";
        }
      }
    </script>
  </body>
</html>
